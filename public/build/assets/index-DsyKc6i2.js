import{j as e,r as c,U as O,m as $,K as q,L as U}from"./app-Dc9BPJ51.js";import{L as Z,t as y,D as J,a as Q,b as W,c as R,A as X}from"./app-layout-CcgGL9Sd.js";import{a as M,c as Y,B as w}from"./app-logo-icon-CH0ORW6l.js";import{u as ee,S as se,a as E,b as H,c as L,d as z,e as S,L as ae,T as ne,f as ie,g as D,h as le,i as V,j as te,k as K,P as re,l as oe,m as N,n as ce,o as de,p as me,q as he,A as xe,r as ue,s as ge,t as pe,v as je,w as fe,x as ye,y as be,z as ke,B as ve,C as Ne,D as Ce,E as we,F as Pe,G as Se,H as De}from"./table-BdddCSuh.js";import{I as C,L as _,a as A}from"./label-DmTmK6Hu.js";import{C as _e}from"./calendar-days-DBlI59LZ.js";import{D as Ae,a as Fe,b as Me,c as Te,d as Ie}from"./dialog-CRKhoLbo.js";/* empty css            */import"./index-NRfi-MUJ.js";import"./index-R-_rSz3o.js";import"./index-DKzscMMm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],F=M("FileText",Re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],He=M("Hash",Ee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],ze=M("KeyRound",Le);function Ve({className:i,...t}){return e.jsx("div",{"data-slot":"skeleton",className:Y("bg-primary/10 animate-pulse rounded-md",i),...t})}function Ke({data:i,onEdit:t}){var I;const[l,r]=c.useState(null),[d,m]=c.useState(""),[g,x]=c.useState([]),[p,j]=c.useState(10),[b,k]=c.useState(0);c.useEffect(()=>{k(0)},[d,g]);const h=c.useMemo(()=>Array.from(new Set(i.map(s=>s.name))),[i]),B=((I=g.find(s=>s.id==="name"))==null?void 0:I.value)??"",T=[{accessorKey:"id",header:()=>e.jsx("span",{className:"flex items-center gap-1",children:e.jsx(He,{className:"w-4 h-4"})}),cell:s=>s.getValue()},{accessorKey:"name",header:()=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"})," Nama"]}),cell:s=>s.getValue(),filterFn:(s,a,n)=>!n||n==="__all__"?!0:s.getValue(a)===n},{accessorKey:"key",header:()=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"w-4 h-4"})," Key"]}),cell:s=>s.getValue()},{accessorKey:"description",header:()=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"})," Deskripsi"]}),cell:s=>s.getValue()?s.getValue():"-"},{accessorKey:"created_at",header:()=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_e,{className:"w-4 h-4"})," Dibuat"]}),cell:s=>new Date(s.getValue()).toLocaleDateString("id-ID")},{id:"actions",header:()=>e.jsx("span",{className:"flex items-center gap-1",children:"Aksi"}),cell:({row:s})=>e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(w,{size:"icon",variant:"ghost","aria-label":"Aksi",children:e.jsx(we,{className:"w-4 h-4"})})}),e.jsxs(W,{children:[e.jsxs(R,{onClick:()=>t==null?void 0:t(s.original),children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"})," Edit"]}),e.jsxs(R,{variant:"destructive",onClick:()=>r(s.original.id),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"})," Hapus"]})]})]})}],u=ee({data:i,columns:T,state:{globalFilter:d,columnFilters:g,pagination:{pageIndex:b,pageSize:p}},onGlobalFilterChange:m,onColumnFiltersChange:x,onPaginationChange:s=>{if(typeof s=="function"){const a=s({pageIndex:b,pageSize:p});k(a.pageIndex),j(a.pageSize)}else k(s.pageIndex),j(s.pageSize)},getCoreRowModel:Ce(),getFilteredRowModel:Ne(),getPaginationRowModel:ve()}),P=u.getPageCount(),f=u.getState().pagination.pageIndex;function G(s,a){let o=[];for(let v=Math.max(0,s-2);v<=Math.min(a-1,s+2);v++)o.push(v);return o[0]>0&&(o=[0,...o]),o[o.length-1]<a-1&&(o=[...o,a-1]),Array.from(new Set(o))}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[e.jsxs("div",{className:"relative w-48",children:[e.jsx(C,{type:"search",placeholder:"Cari permission...",value:d,onChange:s=>m(s.target.value),className:"pl-9"}),e.jsx(se,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]}),e.jsxs(E,{value:B||"__all__",onValueChange:s=>x(a=>[...a.filter(n=>n.id!=="name"),s!=="__all__"?{id:"name",value:s}:void 0].filter(Boolean)),children:[e.jsx(H,{className:"w-40",children:e.jsx(L,{placeholder:"Semua Permission"})}),e.jsxs(z,{children:[e.jsxs(S,{value:"__all__",children:[e.jsx(Z,{className:"w-4 h-4 mr-2 inline"})," Semua Permission"]}),h.map(s=>e.jsxs(S,{value:s,children:[e.jsx(F,{className:"w-4 h-4 mr-2 inline"}),s]},s))]})]}),e.jsxs(E,{value:String(p),onValueChange:s=>j(Number(s)),children:[e.jsx(H,{className:"w-32",children:e.jsx(L,{})}),e.jsx(z,{children:[5,10,20,50].map(s=>e.jsxs(S,{value:String(s),children:[e.jsx(ae,{className:"w-4 h-4 mr-2 inline"}),s]},s))})]})]}),e.jsxs(ne,{className:"border rounded-lg overflow-hidden divide-y divide-muted",children:[e.jsx(ie,{children:u.getHeaderGroups().map(s=>e.jsx(D,{className:"bg-muted dark:bg-zinc-900",children:s.headers.map(a=>e.jsx(le,{className:"font-bold",children:V(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(te,{children:u.getRowModel().rows.length===0?e.jsx(D,{children:e.jsx(K,{colSpan:T.length,className:"text-center",children:"Tidak ada data."})}):u.getRowModel().rows.map((s,a)=>e.jsx(D,{className:a%2===0?"bg-white dark:bg-zinc-900":"bg-gray-50 dark:bg-zinc-800",children:s.getVisibleCells().map(n=>e.jsx(K,{className:"border-l border-r dark:border-zinc-800 dark:text-zinc-100",children:V(n.column.columnDef.cell,n.getContext())},n.id))},s.id))})]}),e.jsx(re,{className:"mt-4",children:e.jsxs(oe,{children:[e.jsx(N,{children:e.jsx(ce,{onClick:s=>{s.preventDefault(),f>0&&u.previousPage()},href:"#","aria-disabled":f===0})}),(()=>{const s=G(f,P);let a=-1;return s.map(n=>{const o=a!==-1&&n-a>1;return a=n,e.jsxs(O.Fragment,{children:[o&&e.jsx(N,{children:e.jsx(de,{})}),e.jsx(N,{children:e.jsx(me,{isActive:n===f,onClick:v=>{v.preventDefault(),u.setPageIndex(n)},href:"#",children:n+1})})]},n)})})(),e.jsx(N,{children:e.jsx(he,{onClick:s=>{s.preventDefault(),f<P-1&&u.nextPage()},href:"#","aria-disabled":f===P-1})})]})}),e.jsx(xe,{open:!!l,onOpenChange:()=>r(null),children:e.jsxs(ue,{children:[e.jsxs(ge,{children:[e.jsx(pe,{children:"Hapus Permission?"}),e.jsx(je,{children:"Apakah Anda yakin ingin menghapus permission ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(fe,{children:[e.jsx(ye,{onClick:()=>r(null),children:"Batal"}),e.jsx(be,{onClick:()=>{l&&(ke.Inertia.delete(`/permissions/${l}`,{onSuccess:()=>y.success("Permission berhasil dihapus!"),onError:()=>y.error("Gagal menghapus permission.")}),r(null))},children:"Hapus"})]})]})})]})}function Be({open:i,onClose:t,initialData:l}){const r=!!(l!=null&&l.id),{data:d,setData:m,post:g,put:x,processing:p,errors:j,reset:b}=$(l||{name:"",key:"",description:""});c.useEffect(()=>{m(l||{name:"",key:"",description:""})},[l,m]);function k(h){h.preventDefault(),r?x(`/permissions/${l.id}`,{onSuccess:()=>{y.success("Permission berhasil diubah!"),t(),b()},onError:()=>{y.error("Gagal mengubah permission.")}}):g("/permissions",{onSuccess:()=>{y.success("Permission berhasil ditambahkan!"),t(),b()},onError:()=>{y.error("Gagal menambah permission.")}})}return e.jsx(Ae,{open:i,onOpenChange:t,children:e.jsxs(Fe,{children:[e.jsx(Me,{children:r?"Edit Permission":"Tambah Permission"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name",children:"Nama Permission"}),e.jsx(C,{id:"name",value:d.name,onChange:h=>m("name",h.target.value),autoFocus:!0}),e.jsx(A,{message:j.name})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"key",children:"Key"}),e.jsx(C,{id:"key",value:d.key,onChange:h=>m("key",h.target.value)}),e.jsx(A,{message:j.key})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"description",children:"Deskripsi"}),e.jsx(C,{id:"description",value:d.description||"",onChange:h=>m("description",h.target.value)}),e.jsx(A,{message:j.description})]}),e.jsxs(Te,{children:[e.jsx(Ie,{asChild:!0,children:e.jsx(w,{type:"button",variant:"secondary",onClick:t,children:"Batal"})}),e.jsx(w,{type:"submit",disabled:p,children:r?"Simpan Perubahan":"Simpan"})]})]})]})})}const Ge=[{title:"Permission",href:"/permissions"}];function ss(){const{permissions:i}=q().props,t=Array.isArray(i)?i:(i==null?void 0:i.data)??[],[l,r]=c.useState(!1),[d,m]=c.useState(!1),[g,x]=c.useState(null);return e.jsxs(X,{breadcrumbs:Ge,children:[e.jsx(U,{title:"Permission"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Permission List"}),e.jsxs(w,{onClick:()=>{x(null),r(!0)},children:[e.jsx(De,{className:"w-4 m-auto"}),"Tambah Permission"]})]}),d?e.jsx(Ve,{className:"h-40 w-full"}):e.jsx(Ke,{data:t,onEdit:p=>{x(p),r(!0)}}),e.jsx(Be,{open:l,onClose:()=>{r(!1),x(null)},initialData:g||{name:"",key:"",description:""}})]})]})}export{ss as default};
